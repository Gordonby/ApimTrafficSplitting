<policies>
    <inbound>
        <choose>
            <when condition="@(new System.Random().Next(0,100) < {{trafficWeight}})">
                <!-- Instead of setting for each, lets start with just overriding when not the default -->
                <!-- <set-variable name="apiBaseUrl" value="{{app1}}" /> -->
            </when>
            <otherwise>
                <set-variable name="apiBaseUrl" value="{{app2}}" />
            </otherwise>
        </choose>
    </inbound>
</policies>